import{P as c,U as u,Xb as p,f as n,j as g,n as h,y as l}from"./chunk-TBNCL6HU.js";var L=(()=>{let i=class i{constructor(t){this._http=t,this.isLogin=new g(this.getInitialLoginState()),this.$isLoggedin=this.isLogin.asObservable(),this.API_KEY="api_key=4b457a98b17afe2fa903e251697f7ee2",this.BASE_URL="https://api.themoviedb.org/3",this.API_URL=this.BASE_URL+"/discover/movie"+this.API_KEY,this.LOCAL_STORAGE_KEY="users"}getTrending(){return this._http.get(`${this.BASE_URL}/discover/movie?${this.API_KEY}`)}getPopularMovies(){return this._http.get(`${this.BASE_URL}/tv/popular?${this.API_KEY}`)}getUpcoming(){return this._http.get(`${this.BASE_URL}/movie/upcoming?${this.API_KEY}`)}getNowPlaying(){return this._http.get(`${this.BASE_URL}/movie/now_playing?${this.API_KEY}`)}getTopRated(){return this._http.get(`${this.BASE_URL}/movie/top_rated?${this.API_KEY}`)}getPopularActors(){return this._http.get(`${this.BASE_URL}/person/popular?${this.API_KEY}`)}getTrendingActors(){return this._http.get(`${this.BASE_URL}/trending/person/day?${this.API_KEY}`)}register(t,e){return new n(r=>{let s=this.getUsers();s.find(m=>m.email===t)?r.error("Email already in use"):(s.push({email:t,password:e}),this.saveUsers(s),r.next("Registration successful"),r.complete())})}getUsers(){let t=localStorage.getItem(this.LOCAL_STORAGE_KEY);return t?JSON.parse(t):[]}saveUsers(t){localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(t))}getUserByEmail(t){return new n(e=>{let s=this.getUsers().filter(o=>o.email===t);s.length>0?e.next(s):e.next([]),e.complete()}).pipe(l(e=>(console.error("Error in getUserByEmail:",e),h(()=>new Error("Error fetching user by email")))))}checkEmail(t){return new n(e=>{let s=this.getUsers().some(o=>o.email===t);e.next(s),e.complete()})}login(){this.isLogin.next(!0),localStorage.setItem("isLoggedIn","true")}logout(){this.isLogin.next(!1),localStorage.removeItem("isLoggedIn")}getInitialLoginState(){return localStorage.getItem("isLoggedIn")==="true"}};i.\u0275fac=function(e){return new(e||i)(u(p))},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})();export{L as a};
